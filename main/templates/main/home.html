{% extends 'main/base.html' %}
{% load extract %}

{% block title %}Home{% endblock %}
{% block header %}Reading Log{% endblock %}
{% block content %}
<div class="row">
  <h2>2023 Reading Progress</h2>
  <p>{{ books_finished }} out of {{ book_goal }} books</p>
  <div class="progress">
      <div class="progress-bar" role="progressbar" aria-valuenow="50"
      aria-valuemin="0" aria-valuemax="100" style="width: {{ percent }}%">
        {{ percent }}%
      </div>
  </div>
</div>
<div class="row">
  <h2>Currently Reading</h2>
  <div class="panel-group">
    {% for book in bookshelf.book_set.all %}
    <div class="panel panel-default">
      <div class="panel-body">
        {% with data=book.id|extract_data %}
          <div class="col-lg-2 col-sm-3">
              <img src="{{data.image}}" alt="thumbnail" style="max-height: 196px; max-width: 128px;">
          </div>  
          <div class="col-lg-10 col-sm-9">
            <h3><b><a href="{% url 'view' book.id %}">{{data.title}}</a></b></h3> 
            <p>{{data.authors}}</p> 
            <div class="progress" style="height: 10px; margin-bottom: 0px">
              <div class="progress-bar" role="progressbar" aria-valuenow="70"
              aria-valuemin="0" aria-valuemax="100" style="width:{{book.progress}}%">
              </div>
            </div>
            <h6 class="text-right">{{book.progress}}%</h6>
            <button type="button" class="btn btn-info">Log</button>
            <button type="button" class="btn btn-success pull-right">Finish</button>
            <button type="button" class="btn btn-danger pull-right" style="margin-right:10px">DNF</button>
          </div>
        {% endwith %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}