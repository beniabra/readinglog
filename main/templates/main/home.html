{% extends 'main/base.html' %}
{% load extract %}

{% block title %}Home{% endblock %}
{% block header %}Reading Log{% endblock %}
{% block content %}
<div class="row">
  <h2>2023 Reading Progress</h2>
  <p>{{ books_finished }} out of {{ book_goal }} books</p>
  <div class="progress">
      <div class="progress-bar" role="progressbar" aria-valuenow="50"
      aria-valuemin="0" aria-valuemax="100" style="width: {{ percent }}%">
        {{ percent }}%
      </div>
  </div>
</div>
<div class="row">
  <h2>Currently Reading</h2>
  <div class="panel-group">
    {% for book in bookshelf.book_set.all %}
    <div class="panel panel-default">
      <div class="panel-body">
        {% with data=book|extract_data %}
          <div class="col-sm-2">
            <a href="{{data.image}}" target="_blank">
              <img src="{{data.image}}" alt="thumbnail" style="width:100%">
            </a>
          </div>  
          <div class="col-sm-10">
            <h3>{{data.title}}</h3> 
            <h6>{{data.authors}}</h6> 
            <div class="progress" style="height: 10px;">
              <div class="progress-bar" role="progressbar" aria-valuenow="70"
              aria-valuemin="0" aria-valuemax="100" style="width:10%">
                <span class="sr-only">70% Complete</span>
              </div>
            </div>  
          </div>
        {% endwith %}
      </div>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}